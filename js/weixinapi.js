(function(b){var c={version:2.9};b.WeixinApi=c;if(typeof define==="function"&&(define.amd||define.cmd)){if(define.amd){define(function(){return c;});}else{if(define.cmd){define(function(e,d,f){f.exports=c;
});}}}var a=function(h,g,f){f=f||{};var d=function(i){switch(true){case /\:cancel$/i.test(i.err_msg):f.cancel&&f.cancel(i);break;case /\:(confirm|ok)$/i.test(i.err_msg):f.confirm&&f.confirm(i);
break;case /\:fail$/i.test(i.err_msg):default:f.fail&&f.fail(i);break;}f.all&&f.all(i);};var e=function(j,i){if(h.menu==="menu:general:share"){if(i.shareTo=="favorite"){if(f.favorite===false){return i.generalShare(j,function(){});
}}i.generalShare(j,d);}else{WeixinJSBridge.invoke(h.action,j,d);}};WeixinJSBridge.on(h.menu,function(i){if(f.async&&f.ready){var j="_wx_loadedCb_";c[j]=f.dataLoaded||new Function();
if(c[j].toString().indexOf(j)>0){c[j]=new Function();}f.dataLoaded=function(k){c[j](k);e(k,i);};if(!(i&&i.shareTo=="favorite"&&f.favorite===false)){f.ready&&f.ready(i);
}}else{if(!(i&&i.shareTo=="favorite"&&f.favorite===false)){f.ready&&f.ready(i);}e(g,i);}});};c.shareToTimeline=function(e,d){a({menu:"menu:share:timeline",action:"shareTimeline"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.title,title:e.desc,img_width:"640",img_height:"640"},d);
};c.shareToFriend=function(e,d){a({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},d);
};c.shareToWeibo=function(e,d){a({menu:"menu:share:weibo",action:"shareWeibo"},{content:e.desc,url:e.link},d);};c.generalShare=function(e,d){a({menu:"menu:general:share"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.title,title:e.desc,img_width:"640",img_height:"640"},d);
};c.addContact=function(d,e){e=e||{};WeixinJSBridge.invoke("addContact",{webtype:"1",username:d},function(g){var f=!g.err_msg||"add_contact:ok"==g.err_msg||"add_contact:added"==g.err_msg;
if(f){e.success&&e.success(g);}else{e.fail&&e.fail(g);}});};c.imagePreview=function(d,e){if(!d||!e||e.length==0){return;}WeixinJSBridge.invoke("imagePreview",{current:d,urls:e});
};c.showOptionMenu=function(){WeixinJSBridge.call("showOptionMenu");};c.hideOptionMenu=function(){WeixinJSBridge.call("hideOptionMenu");};c.showToolbar=function(){WeixinJSBridge.call("showToolbar");
};c.hideToolbar=function(){WeixinJSBridge.call("hideToolbar");};c.getNetworkType=function(d){if(d&&typeof d=="function"){WeixinJSBridge.invoke("getNetworkType",{},function(f){d(f.err_msg);
});}};c.closeWindow=function(d){d=d||{};WeixinJSBridge.invoke("closeWindow",{},function(e){switch(e.err_msg){case"close_window:ok":d.success&&d.success(e);
break;default:d.fail&&d.fail(e);break;}});};c.ready=function(f){if(f&&typeof f=="function"){var d=this;var e=function(){f(d);};if(typeof b.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",e,false);
}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",e);document.attachEvent("onWeixinJSBridgeReady",e);}}}else{e();}}};c.openInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent);
};c.scanQRCode=function(d){d=d||{};WeixinJSBridge.invoke("scanQRCode",{},function(e){switch(e.err_msg){case"scan_qrcode:ok":d.success&&d.success(e);break;
default:d.fail&&d.fail(e);break;}});};c.getInstallState=function(e,d){d=d||{};WeixinJSBridge.invoke("getInstallState",{packageUrl:e.packageUrl||"",packageName:e.packageName||""},function(h){var g=h.err_msg,f=g.match(/state:yes_?(.*)$/);
if(f){h.version=f[1]||"";d.success&&d.success(h);}else{d.fail&&d.fail(h);}d.all&&d.all(h);});};c.openLocation=function(e,d){d=d||{};WeixinJSBridge.invoke("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name,address:e.address,scale:e.scale||14,infoUrl:e.infoUrl||""},function(f){if(f.err_msg==="open_location:ok"){d.success&&d.success(f);
}else{d.fail&&d.fail(f);}d.all&&d.all(f);});};c.sendEmail=function(e,d){d=d||{};WeixinJSBridge.invoke("sendEmail",{title:e.subject,content:e.body},function(f){if(f.err_msg==="send_email:sent"){d.success&&d.success(f);
}else{d.fail&&d.fail(f);}d.all&&d.all(f);});};c.enableDebugMode=function(d){b.onerror=function(h,f,e,g){if(typeof d==="function"){d({message:h,script:f,line:e,column:g});
}else{var i=[];i.push("额，代码有错。。。");i.push("\n错误信息：",h);i.push("\n出错文件：",f);i.push("\n出错位置：",e+"行，"+g+"列");alert(i.join(""));}};};})(window);